<!Doctype html>
<html>
<head>
<style type="text/css">
	canvas{
		box-shadow:0px 0px 10px #999;
		height:200px;
		margin:100px;
		width:200px;
	}
</style>
</head>
<body>
	<canvas id="c" width="200" height="200"></canvas>
	<script type="text/javascript">
		c = document.getElementById("c").getContext("2d");
		c.fillStyle="#00a8ff";
		//c.fillRect(i,100,3,1);
		var x=40,y=40,w=120,h=120;
		n = 0;
		setInterval(function (){
			n = (n+1)%6;
			c.clearRect(0,0,200,200);
			// top
			//for(var i=x+n-3;i<x+w;i+=6){
			//	c.fillRect(i,y,3,1);
			//}
			//for(var i=y+n+w%6-3;i<y+h;i+=6){
			////	c.fillRect(x+w,i,1,3);
			//}
			for(var i=0;i<w;i+=6){
				// 对于第一次的特殊情况
				if(i==0){
					if(n==4){
						c.fillRect(x,y,1,1);
					}else if(n==5){
						c.fillRect(x,y,2,1);
					}
					c.fillRect(i+x+n,y,3,1);
				// 对于最后一次的特殊情况
				}else if(i+n+1==w){
					c.fillRect(x+i+n,y,1,1);
				}else if(i+n+2==w){
					c.fillRect(x+i+n,y,2,1);
				// 一般情况
				}else{
					c.fillRect(i+x+n,y,3,1);
				}
				
				if(i+n+1==w){
					offset=5;
				}else if(i+n+2==w){
					offset=4;
				}else if(i+n+3==w){
					offset=3;
				}else if(i+n+4==w){
					offset=2;
				}else if(i+n+5==w){
					offset=1;
				}else if(i+n+6==w){
					offset=0;
				}
			}
			//var offset = (6-(w-n)%6)%6;
			// right
			for(i=0;i<h;i+=6){
				// 对于第一次的特殊情况
				if(i==0){
					if(offset==4){
						c.fillRect(x,y,1,1);
					}else if(offset==5){
						c.fillRect(x,y,1,2);
					}
					c.fillRect(x+w,y+i+offset,1,3);
				// 对于最后一次的特殊情况
				}else if(i+offset+1==h){
					c.fillRect(x+w,y+i+offset,1,1);
				}else if(i+offset+2==h){
					c.fillRect(x+w,y+i+offset,1,2);
				// 一般情况
				}else{
					c.fillRect(x+w,y+i+offset,1,3);
				}
			}
		},20)
		
	</script>
</body>
</html>